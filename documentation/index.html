<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<title>MATLink — Documentation</title>
<meta name="description" content="">
<meta name="author" content="R. Menon, Sz. Horvát">

<link rel="stylesheet" href="http://matlink.org/assets/css/bootstrap.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/site.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/prettify.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/lang-matlab.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/lang-mma.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/font-awesome.min.css">

<script>

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-40302070-1']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

</script>

</head>
<body>

<!--navigation bar-->
<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<a class="brand" href="http://matlink.org/">MATLink</a>
			<ul class="nav">
				<li><a href="http://matlink.org/#installation">Installation</a></li>
				<li class="dropdown">
				<a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">
					Getting started
					<i class="icon-caret-down"></i>
				</a>
				<ul class="dropdown-menu" role="menu">
					<li class=""><a href="http://matlink.org/#connecting">Connecting to MATLink</a></li>
					<li class=""><a href="http://matlink.org/#executing-matlab">Executing MATLAB commands</a></li>
					<li class=""><a href="http://matlink.org/#transferring-data">Transferring data</a></li>
					<li class=""><a href="http://matlink.org/#scripts-functions">Working with scripts and functions</a></li>
				</ul>
				</li>
				<li><a href="http://matlink.org/documentation/">Documentation</a></li>
				<li><a href="http://matlink.org/troubleshooting/">Troubleshooting</a></li>
				<li><a href="http://matlink.org/examples/">Examples</a></li>
				<li><a href="http://matlink.org/extensions/">Extensions</a></li>
			</ul>
		</div>
	</div>
</div>

<div class="container">
<h1 class="main-header">Documentation</h1>
<p>MATLink is a <i>Mathematica</i><sup>™</sup> application to communicate with MATLAB<sup>™</sup>, providing functionality to easily transfer data between the two systems, and use MATLAB functions, scripts and toolboxes from within <i>Mathematica</i>. MATLink is <b>not</b> a substitute for MATLAB, nor is it a replacement for actual knowledge of MATLAB and <i>Mathematica</i>; it is merely an application that allows the user to harness the power of both computational systems to program and develop more efficiently.</p>


<div class="row">
	<div class="span4">
		<p>MATLink is written in <i>Mathematica</i> and C++ and connects to MATLAB using the <a href="http://www.mathworks.com/help/matlab/matlab_external/using-matlab-engine.html">MATLAB Engine interface</a>. The image to the right is an overview of the different functions in MATLink and how they interact with the different systems. This documentation contains
		<ul>
			<li>the <a href="#function-reference">function reference</a>, which is the official documentation for the different functions in MATLink, grouped by scope</li>
			<li>a list of <a href="#supported-datatypes">supported datatypes</a> and <a href="#translation-rules">rules for conversions</a></li>
			<li>a list of <a href="#known-issues">known issues</a>, which document known bugs, missing functionality, and other limitations of MATLink (mostly due to the limitations of the MATLAB engine).
		</ul>
		</p>
	</div>
	<div class="span8">
		<img src="http://matlink.org/assets/img/intro.png">
	</div>
</div>

<div id="function-reference">
<h2>Function Reference</h2>
<section id="connection">
	<h3>Connecting to MATLAB</h3>
	<ul id="install-tabs" class="nav nav-tabs">
		<li class="active"><a href="#connection-introduction" data-toggle="tab">Introduction</a></li>
		<li><a href="#ConnectEngine" data-toggle="tab">ConnectEngine</a></li>
		<li><a href="#DisconnectEngine" data-toggle="tab">DisconnectEngine</a></li>
		<li><a href="#OpenMATLAB" data-toggle="tab">OpenMATLAB</a></li>
		<li><a href="#CloseMATLAB" data-toggle="tab">CloseMATLAB</a></li>
	</ul>

	<div id="install-tabs-content" class="tab-content">
		<div class="tab-pane fade in active" id="connection-introduction">
			<p>MATLink has four functions that handle various aspects of startup and shutdown of MATLAB and the underlying engine</p>
			<ul>
				<li><a href="#ConnectEngine"><code>ConnectEngine</code></a> and <a href="#DisconnectEngine"><code>DisconnectEngine</code></a>, which interacts with the MATLAB engine.</li>
				<li><code>OpenMATLAB</code> and <code>CloseMATLAB</code>, which interacts with MATLAB.</li>
			</ul>
			<p><code>OpenMATLAB</code>, automatically calls <code>ConnectEngine</code> if the engine is not running, so one can launch MATLAB directly with it after loading the package. Similarly, <code>DisconnectEngine</code> will automatically terminate any open connection to MATLAB before shutting down the engine.</p>
<p>MATLink uses a session folder in <code>$TemporaryDirectory</code> to save scripts and functions defined during the current session. These are removed when <code>DisconnectEngine</code> is called, or by the operating system (typically after a reboot or daily, depending on the system), if there are any abandoned directories after a crash. To manually remove those folders, run <code>MATLink`Developer`CleanupTemporaryDirectories[]</code>.</p>
		</div>

		<div class="tab-pane fade" id="ConnectEngine">
			<blockquote><code>ConnectEngine[]</code> will connect to the MATLAB engine using MathLink.</blockquote>

			<h4>Details &amp; Options</h4>
			<ul>
				<li>On linux and OS X, if the <code>mengine</code> binary is not found, <code>ConnectEngine</code> will try to auto compile it.</li>
				<li><code>ConnectEngine</code> creates a session directory in <code>$TemporaryDirectory</code> to which <code>MScripts</code> are written. This directory is automatically removed when <code>DisconnectEngine</code> is called.</li>
			</ul>
		</div>

		<div class="tab-pane fade" id="DisconnectEngine">
			<blockquote><code>DisconnectEngine[]</code> will terminate the MathLink connection with the MATLAB engine.</blockquote>

			<h4>Details &amp; Options</h4>
			<ul>
				<li>If a MATLAB connection is alive, <code>DisconnectEngine</code> will terminate it before shutting down the engine.</li>
				<li><code>DisconnectEngine</code> deletes the session directory in <code>$TemporaryDirectory</code> that was created by <code>ConnectEngine</code>.</li>
			</ul>
		</div>

		<div class="tab-pane fade" id="OpenMATLAB">
			<blockquote><code>OpenMATLAB[]</code> will start an instance of MATLAB for use with MATLink.</blockquote>
			<h4>Details &amp; Options</h4>

			<ul>
				<li>If the MATLAB engine is not running, <code>OpenMATLAB</code> will call <code>ConnectEngine[]</code> to launch the engine before starting MATLAB</li>
			</ul>
		</div>

		<div class="tab-pane fade" id="CloseMATLAB">
			<blockquote><code>CloseMATLAB[]</code> will close the currently open instance of MATLAB.</blockquote>
		</div>
	</div>
</section>

	<section id="evaluation">
		<h3>Evaluating MATLAB commands</h3>
		<ul id="install-tabs" class="nav nav-tabs">
			<li class="active"><a href="#evaluation-introduction" data-toggle="tab">Introduction</a></li>
			<li><a href="#MEvaluate" data-toggle="tab">MEvaluate</a></li>
			<li><a href="#CommandWindow" data-toggle="tab">CommandWindow</a></li>
			<li><a href="#MATLABCell" data-toggle="tab">MATLABCell</a></li>
		</ul>

		<div id="install-tabs-content" class="tab-content">
			<div class="tab-pane fade in active" id="evaluation-introduction">
				<p>Arbitrary MATLAB code can be evaluated in three ways — using <code>MEvaluate</code>, <code>MATLABCell</code> or <code>CommandWindow</code> (only the first two are available on non-Windows operating systems). The primary difference between the three functions is:</p>
				<ul>
					<li><code>MEvaluate</code> is a <i>Mathematica</i> function that takes MATLAB input as strings, and can be conveniently used in larger programs</li>
					<li><code>MATLABCell</code> is a styled cell in a <i>Mathematica</i> notebook, that is useful for interactive work</li>
					<li><code>CommandWindow</code> is just a <i>Mathematica</i> function that activates a native MATLAB command window interface. With this, one  works directly with MATLAB, independent of MATLink (although the variables are still accessible via MATLink).</li>
				</ul>

				<p>Since there is overhead in transferring instructions and output with <code>MEvaluate</code>, it is advisable to not display output where not necessary (both, in MATLAB and <i>Mathematica</i>). If you need to run the same set of instructions repeatedly, use an <code>MScript</code> instead of <code>MEvaluate</code>.</p>
			</div>
			<div class="tab-pane fade" id="MEvaluate">
				<blockquote><code>MEvaluate["code"]</code> will execute <code>code</code> in MATLAB as if it were entered at the command prompt and returns the output as text.</blockquote>

				<h4>Details &amp; Options</h4>
				<ul>
					<li><code>MEvaluate</code>, when successful, will always return a string containing the output from MATLAB's command window.</li>
				</ul>

				<h4>Possible issues</h4>
				<ul>
					<li><code>MEvaluate</code> performance suffers if the output is not suppressed in MATLAB code. If you do not need to see the output of <code>MEvaluate</code>, use <code>MEvaluate["command;"]</code> instead of <code>MEvaluate["command"];</code>.
					</li>
					<li>The output length of <code>MEvaluate</code> is limited to approximatey 100,000 characters. The rest will be truncated.</li>
				</ul>
			</div>

			<div class="tab-pane fade" id="CommandWindow">
				<blockquote><code>CommandWindow["action"]</code> will perform <code>"action"</code> on MATLAB's built-in command window. This function works only on Windows.</blockquote>

				<img src="http://matlink.org/assets/img/command_window.png">
				<h4>Details &amp; Options</h4>
				<ul>
					<li><code>CommandWindow["Show"]</code> displays the command window. When an evaluation is not in progress, this window can be used to input MATLAB commands independently of MATLink.</li>
					<li><code>CommandWindow["Hide"]</code> hides the command window.</li>
				</ul>
			</div>

			<div class="tab-pane fade" id="MATLABCell">
				<blockquote><code>MATLABCell[]</code> creates a program cell in the current notebook, whose contents are interpreted as MATLAB code.</blockquote>
				<img src="http://matlink.org/assets/img/matlab_cell.png" width=600px><br>
				<img src="http://matlink.org/assets/img/plot_sinx.png" width=600px>
			</div>
		</div>
	</section>

<div class="container">
	<section id="transferring-variables">
		<h3>Transferring variables</h3>
		<ul id="install-tabs" class="nav nav-tabs">
			<li class="active"><a href="#transferring-introduction" data-toggle="tab">Introduction</a></li>
			<li><a href="#MGet" data-toggle="tab">MGet</a></li>
			<li><a href="#MSet" data-toggle="tab">MSet</a></li>
			<li><a href="#MCell" data-toggle="tab">MCell</a></li>
		</ul>

		<div id="install-tabs-content" class="tab-content">
			<div class="tab-pane fade in active" id="transferring-introduction">
				<p>Any <a href="http://matlink.org/documentation/#supported-datatypes">supported datatype</a> can be transferred from <i>Mathematica</i> to MATLAB and vice versa using <code>MSet</code> and <code>MGet</code> respectively. However, one must be aware of the overhead involved in data transfer (when using any link technology) and avoid programming pitfalls that result in unnecessary back-and-forth data transfer (unless absolutely necessary). It is always good practice to transfer as much as possible in one go, and only transfer what is necessary.</p>

				<p>Every effort has been made to convert quantities to native data structures in each system (such as arrays in MATLAB and lists in <i>Mathematica</i>) and allow the user to retrun the same data to the originating system without loss of structure, but there are certain exceptions (MATLAB cells). See the <a href="">translation rules</a> for more information.</p>
			</div>

			<div class="tab-pane fade" id="MGet">
				<blockquote><code>MGet["var"]</code> will return the value of the variable <code>var</code> from the MATLAB workspace. Data structures are translated into a <i>Mathematica</i> compatible format.</blockquote>

				<h4>Details &amp; Options</h4>
				<ul>
					<li><code>var</code> must be a string denoting the name of the variable in MATLAB</li>
<pre class="prettyprint lang-mma">
MEvaluate["x = 1:10;"]
MGet["x"]
(* Out[1]= {1., 2., 3., 4., 5., 6., 7., 8., 9., 10.} *)
</pre>

					<li><code>MGet</code> is <code>Listable</code></li>
<pre class="prettyprint lang-mma">
MEvaluate["[v, e] = eig(rand(5));"]
{v, e} = MGet[{"v", "e"}]
</pre>
				</ul>

				<h4>Possible issues</h4>
				<ul>
					<li>MATLAB works with floating point values by default. Even array indices are floating point, and such values need to be explicitly rounded in <i>Mathematica</i> before they can be used as indices again.
<pre class="prettyprint lang-mma">
MEvaluate["s = size(zeros(3,4));"]
s = MGet["s"]
(* Out: {3., 4.} *)
</pre>
</li>
<li>Do not attempt to use <code>MGet</code> on objects (<code>classdef</code> objects) or data structures which contain objects. This will crash MATLAB because of a MATLAB bug. See the <a href="#known-issues">known issues</a> section for additional details.</li>
</ul>
			</div>

			<div class="tab-pane fade" id="MSet">
				<blockquote><code>MSet["var", value]</code> will assign value to variable <code>var</code> in the MATLAB workspace.</blockquote>
				<h4>Examples</h4>
				<ul>
					<li>
<pre class="prettyprint lang-mma">
MSet["a", {1,2,3}]
MEvaluate["a"]
(* Out: a = 1  2  3 *)
</pre></li>
</ul>

				<h4>Details &amp; Options</h4>
				<ul>
					<li><code>var</code> must be a string denoting the name of the variable in MATLAB</li>
					<li><code>value</code> must be in a MATLink compatible format.</li>

					<li>To force a list to be interpreted as a MATLAB cell, wrap it in the <code>MCell</code> head:</li>
<pre class="prettyprint lang-mma">
MSet["a", MCell[{1, 2, 3}]]
MEvaluate["a"]
(* Out: a = [1] [2] [3] *)
</pre>
				</ul>

			</div>

			<div class="tab-pane fade" id="MCell">
				<blockquote><code>MCell</code> is an inert head used with <code>MSet</code> to indicate that the list be interpreted as a MATLAB cell data structure.</blockquote>

				<h4>Example</h4>
<pre class="prettyprint lang-mma">
MSet["a", MCell[{1, 2, 3}]]
MEvaluate["a"]
(* Out: a = [1] [2] [3] *)
</pre>
			</div>
	</section>
</div>
</div>

<div class="container">
	<section id="scripts-functions">
		<h3>Scripts &amp; Functions</h3>
		<ul id="install-tabs" class="nav nav-tabs">
			<li class="active"><a href="#scripts-introduction" data-toggle="tab">Introduction</a></li>
			<li><a href="#MScript" data-toggle="tab">MScript</a></li>
			<li><a href="#MFunction" data-toggle="tab">MFunction</a></li>
		</ul>

		<div id="install-tabs-content" class="tab-content">
			<div class="tab-pane fade in active" id="scripts-introduction">
				<p>MATLAB programming involves script files, which are a series of sequential instructions to the interpreter (executed in the base workspace) or functions, which take zero or more inputs and return zero or more outputs (executed in its own workspace). The <code>MScript</code> and <code>MFunction</code> functions allow one to execute MATLAB scripts and functions from within <i>Mathematica</i>. This makes it easy to reuse code found online, either on the MathWorks File Exchange or elsewhere, instead of reimplementing it in <i>Mathematica</i>.</p>
				In MATLAB, one can define functions to have completely different behaviour based on the number of <i>output arguments</i> for the same set of input arguments. This is at odds with the behaviour in <i>Mathematica</i> (and in functional programming languages in general), where a function's behaviour is determined solely by its inputs. To bridge this divide, <code>MFunction</code> offers the functionality to use the multiple output form of MATLAB functions, but the number of outputs must be set explicitly when defining the function.
			</div>
			<div class="tab-pane fade" id="MScript">
				<blockquote><code>MScript["scriptname", "commands"]</code> will create a MATLAB script containing <code>commands</code>.
				</blockquote>

				<h4>Details &amp; Options</h4>
				<ul>
					<li><code>MScript["scriptname", "commands"]</code> returns <code>MScript["scriptname"]</code>, which can be evaluated using <code>MEvaluate</code>.</li>

<pre class="prettyprint lang-mma">
hello = MScript["hello", "disp('Hello world!')"];
MEvaluate@hello
(* Out[1] = "Hello world!" *)
</pre>
					<li>When creating new scripts, <code>MScript</code> will not overwrite exsiting <code>.m</code> files. To force overwrite an existing file, use the option <code>"Overwrite" -> True</code> (default value for <code>"Overwrite"</code> is <code>False</code>).</li>
			</div>

			<div class="tab-pane fade" id="MFunction">
				<blockquote>
					<code>MFunction["func"]</code> represents a MATLAB function <code>func</code> (that is on MATLAB's path), and can be called directly from within <i>Mathematica</i>.<br>
					<code>MFunction["func", "body"]</code> creates a new <code>.m</code> file with the contents <code>body</code> and returns <code>MFunction["func"]</code>.
				</blockquote>

				<h4>Examples</h4>
				<ul>
					<li>Calling a built-in MATLAB function
<pre class="prettyprint lang-mma">
eig = MFunction["eig"];
eig[{{1, 2}, {3, 4}}]
(* Out[1]= {{-0.372281}, {5.37228}} *)
</pre></li>
					<li>Creating a custom function and using it
<pre class="prettyprint lang-mma">
add = MFunction["add", "
	function res = add(x,y)
		res = x+y
	end "];
add[3, 4]
(* Out[1] = 7 *)
</pre>
					</li>

					<li>Creating an anonymous function and using it
<pre class="prettyprint lang-mma">
add = MFunction["add", "@(x,y)x+y"];
add[3, 4]
(* Out[1] = 7 *)
</pre>
Anonymous functions defined in this manner form a closure, as in MATLAB.
					</li>
				</ul>

				<h4>Details &amp; Options</h4>
				<ul>
					<li>Use <code>MFunction["func", "OutputArguments" -> n]</code> when <code>func</code> returns more than one argument (default value for <code>"OutputArguments"</code> is 1).</li>

<pre class="prettyprint lang-mma">
eigsys = MFunction["eig", "OutputArguments" -> 2];
eigsys[{{1, 2}, {3, 4}}]
(* Out[1]= {{{-0.824565, -0.415974}, {0.565767, -0.909377}}, {{-0.372281, 0.}, {0., 5.37228}}} *)
</pre>
					<li>If <code>func</code> returns no outputs (or to suppress output), use <code>MFunction["func", "Output" -> False]</code> (default value for <code>"Output"</code> is <code>True</code>).</li>
<pre class="prettyprint lang-mma">
imagesc = MFunction["imagesc", "Output" -> False];
data = Import["ExampleData/ozonemap.hdf", {"Datasets", "TOTAL_OZONE"}][[20 ;;, All]];
imagesc[data];
</pre>
<p>Note that MATLAB plots will be opened in a new window, unlike <i>Mathematica</i> plots which are displayed inside the notebook.</p>
					<li>When creating new functions using the syntax <code>MFunction["func", "body"]</code>, <code>MFunction</code> will not overwrite exsiting <code>.m</code> files. To force overwrite an existing file, use the option <code>"Overwrite" -> True</code> (default value for <code>"Overwrite"</code> is <code>False</code>).</li>
					<li>If the first character in <code>"body"</code> is <code>@</code>, then the function is defined as an anonymous function in MATLAB's workspace and no function file is created.</li>
				</ul>

				<h4>Possible issues</h4>
				<ul>
					<li>By default <code>MFunction</code> assumes a single output argument, which causes errors in some MATLAB functions that return no output.</li>
<pre class="prettyprint lang-mma">
MFunction["disp"]["Hello"]

MATLink::errx: Error using disp
Too many output arguments.

(* Out[1]= $Failed *)
</pre>
					Use <code>"Output" -> False</code> in such situations.
				</ul>
			</div>
		</div>
	</section>
</div>
</div>

<div class="container">
	<div id="supported-datatypes">
	<h2>Supported Datatypes</h2>

	<p>The following data types can be transferred in both directions:</p>

	<ul>
		<li>double precision numerical arrays (including multidimensional)</li>
		<li>double precision sparse matrices</li>
		<li>logical arrays (including multidimensional)</li>
		<li>sparse logical matrices</li>
		<li>strings (i.e. char arrays of dimension <code>[1 n]</code>)</li>
		<li>cells (including multidimensional)</li>
		<li>structs (only with size <code>[1 1]</code>)</li>
	</ul>
	<p>The following can only be transferred from MATLAB to <i>Mathematica:</i></p>

	<ul>
		<li>numerical arrays with the following types: single, int8, int16, int32, uint8 and uint16</li>
		<li>structs with any number of elements </li>
	</ul>
	</div>

	<div id="translation-rules">
	<h3>Rules for translating data structures</h3>
	<p>This section documents the internal rules that govern the translation of data structures from MATLAB to <i>Mathematica</i> and vice versa. You do not need to do this conversion, but you should be aware of how it is converted so that you can design your programs accordingly.</p>
	<h4>MATLAB → <i>Mathematica</i></h4>
	<ol>
		<li><h5>Numerical Arrays</h5></li>
		<ul>
			<li><code>single</code> and <code>double</code> are converted to <code>Real</code> or <code>Complex</code> (as the case may be)</li>
			<li>All the supported <code>int*</code> and <code>uint*</code> are converted to <code>Integer</code> or <code>Complex</code> (as the case may be)</li>
			<li>1×1 matrices (scalars) are atomic</li>
			<li>1×N matrices (row vectors) are simple (packed) lists of length N</li>
			<li>M×N×... matrices (any dimension) are packed arrays of the same dimension</li>
			<li>Empty matrices (any dimension) are <code>{}</code></li>
		</ul>

		<li><h5>Logical Arrays</h5></li>
		<ul>
			<li>0 and 1 (<code>logical</code>) or <code>true</code> and <code>false</code> are converted to <code>True</code> and <code>False</code> respectively</li>
			<li>All other rules are identical to those for numerical arrays</li>
		</ul>

		<li><h5>Char Arrays</h5></li>
		<ul>
			<li> <code>char</code> is converted to <code>String</code> </li>
			<li>1×N char arrays are atomic strings</li>
			<li>M×N×... char arrays (any dimension) are lists of individual characters</li>
		</ul>

		<li><h5>Struct Arrays</h5></li>
		<ul>
			<li> <code>struct</code> is converted to a list of rules</li>
			<li>Field names are the LHS of rules (stored as string); values are the RHS of rules</li>
			<li>1×1 struct arrays are a simple list of rules of length F, where F is the number of fields</li>
			<li>1×N struct arrays are a list of rules of dimension N×F</li>
			<li>M×N×... struct arrays (any dimension) are lists of dimension M×N×...×F</li>
		</ul>
		<li><h5>Cells</h5></li>
		<ul>
			<li>1×1 cells are atomic</li>
			<li>1×N cells are simple (unpacked) lists of length N</li>
			<li>M×N×... cells (any dimension) are unpacked arrays</li>
			<li>Empty cells (any dimension) are <code>{}</code></li>
		</ul>
	</ol>

	<h4><i>Mathematica</i> → MATLAB</h4>
	<ol>
		<li><h5>Numbers and numerical lists</h5></li>
		<ul>
			<li><code>Integer</code>, <code>Real</code> and <code>Complex</code> are all converted to <code>double</code></li>
			<li>Simple lists are row vectors</li>
			<li>All other rectangular lists of lists (any dimension) are converted to an identical sized array.</li>
			<li>Numerical lists can be interpreted as MATLAB cells using the <code>MCell</code> head</li>
		</ul>

		<li><h5>Strings and string lists</h5></li>
		<ul>
			<li>String is converted to a 1×N char array, where N is the string length.</li>
			<li>Lists of strings (any dimension) are converted to cell arrays of appropriate dimensions</li>
		</ul>

		<li><h5>Lists of rules</h5></li>
		<ul>
			<li>Simple lists of rules are converted to a struct if all the LHS of the rules is a string, the RHS is a supported datatype and there are no duplicate fields.</li>
		</ul>

		<li><h5>Mixed lists</h5></li>
		<ul>
			<li>Lists of mixed datatypes are transferred as cells of appropriate dimensions</li>
		</ul>

	</ol>

</div>
</div>

<div class="container">
	<div id="known-issues">
	<h2>Known Issues</h2>
	<ul>
		<li>
    <h4>MATLAB R2014a</h4>
    <p>The OS X (and possibly Linux) versions of MATLAB R2014a contain a bug that breaks MATLink.  Unfortunately this bug is in a core MATLAB Engine feature MATLink relies on, and it is not easy to work around it.  Until this is resolved, please consider using earlier versions of MATLAB (R2013b or earlier) on OS X or Linux to run MATLink.</p>

		<h4>Large array support</h4>

		<p>At the moment, only arrays with less than <code>2^31-1</code> elements are supported.  Note that this is true for matrices and multidimensional arrays as well: the <em>total number</em> of matrix elements may not excede <code>2^31-1</code> even if the matrix has fewer rows and columns than this.  As an example, the largest supported square matrix can be of size 46341 by 46341.</p>

		<p>As a reference point, a double precision array with the maximum number of allowed elements would take up 16 GB of memory, so this limit should be more than sufficient for most applications.</p></li>

		<li><h4>Inf and NaN</h4>

		<p>Inf and Nan are not supported at the moment. The values returned to <i>Mathematica</i> are not safe to use: operations on them give unpredictable results.</p></li>

		<li><h4>Multiple instances of MATLAB</h4>

		<p>If a MATLAB background process has already been started by MATLink, it will not be possible to launch another instance of MATLAB by clicking on its icon. As a workaround, either start MATLAB before you call <code>OpenMATLAB[]</code> or launch the MATLAB executable directly as:</p>

<h5>On OS X</h5>
<pre>
open -n /Applications/MATLAB_R2013a.app
</pre>

<p>or by executing the binary from the command line</p>

<pre>
/Applications/MATLAB_R2013a.app/bin/matlab
</pre>

<h5>On Windows</h5>
<p>Run the binary located at</p>
<pre>
C:\Program Files\MATLAB\R2013a\bin\matlab.exe
</pre>
</li>

<li><h4>Transferring MATLAB objects</h4>

<p>Do not use <code>MGet</code> on MATLAB objects, or data structures that contain custom classes as elements. On OS X and Unix this will crash the MATLAB process because of a bug in the MATLAB Engine interface. For example,</p>

<pre class="prettyprint lang-matlab">
m = containers.Map('a',1);
s = struct('a',1, 'b',m);
</pre>

<p>Now running <code>MGet["m"]</code> will crash MATLAB because <code>m</code> is an object. <code>MGet["s"]</code> will crash because <code>s</code> contains an object.</p>

</li>

<li><h4>Reading HDF5 based .mat files</h4>

<p>All the limitations of the <a href="http://www.mathworks.com/help/matlab/matlab_external/using-matlab-engine.html">MATLAB Engine interface</a> apply to MATLink.  The most noticeable of these is that HFD5 based <code>.mat</code> files cannot be read.  Quoting the <a href="http://www.mathworks.com/help/matlab/matlab_external/using-matlab-engine.html">MATLAB documentation</a>,</p>

<div class="quote">
The MATLAB engine cannot read MAT-files in a format based on HDF5. These are MAT-files saved using the -v7.3 option of the save function or opened using the w7.3 mode argument to the C or Fortran matOpen function.
</div>

<p>As of R2013a, MATLAB does not save <code>.mat</code> files in this format by default, unless its settings are changed.</p>
</li>

<li><h4>Unicode support</h4>

<p><code>MGet</code> and <code>MSet</code> do support Unicode strings, and will preserve Unicode characters. However, <code>MEvaluate</code> will not preserve unicode characters in its output. <code>MEvaluate</code> should handle Unicode input correctly.  If you discover a situation where it does not, please report it.</p>

<p>The reason unicode output needed to be disabled for <code>MEvaluate</code> is that MATLAB's C API is unpredictable and may not produce correct unicode output depending on version and operating system.</p>

<pre class="prettyprint lang-mma">
MEvaluate["s='Paul Erdős'"] (* Unicode input *)
(* Out: s = Paul Erd!s *)

MGet["s"]
(* Out: Paul Erdős *)
</pre>

<p>In <code>MEvaluate</code>'s output Unicode in mangled, however, <code>MGet</code> transfers it correctly.</p>

<p>A workaround is using <code>evalc</code>.  This is not used in MATLink because of unsolved <a href="https://github.com/rsmenon/MATLink/issues/29">issue #29</a>.</p>
</li>

<li><h4>Path names with non-ASCII characters on Windows</h4>
On Windows, it maybe not be possible to change (<code>cd</code>) MATLAB into directories that have non-ASCII characters in their path name.  At the moment, the following workaround is available:

<pre class="prettyprint lang-mma">
MEvaluate["feature('DefaultCharacterSet', 'windows-1252')"]
MFunction["cd"]["\\path\\to\\directory"]
</pre>

It may be necessary to use your system's default encoding instead of <code>windows-1252</code>.  To find what it is, evaluate <code>feature('DefaultCharacterSet')</code> in a standalone (non-MATLink) MATLAB session.

</li>
</ul>
</div>
<footer class="footer">
	<div class="container">
		<ul class="footer-links">
			<li>Created and maintained by <a href="https://github.com/rsmenon/">rsmenon</a> and <a href="https://github.com/szhorvat">szhorvat</a> © 2013-2017</li>
			<li class="muted">·</li>
			<li>Licensed under the <a href="http://opensource.org/licenses/mit-license.html">MIT License</a></li>
			<li class="muted">·</li>
			<li><a href="http://matlink.org/changelog.html">Change log</a></li>
		</ul>
		<p><i>Mathematica</i> is a registered trademark of <a href="http://wolfram.com">Wolfram Research, Inc.</a> and MATLAB is a registered trademark of <a href="http://mathworks.com/">The MathWorks, Inc.</a></p>
	</div>
</footer>
</div>

<script src="http://matlink.org/assets/js/jquery-1.9.1.min.js"></script>
<script src="http://matlink.org/assets/js/underscore.min.js"></script>
<script src="http://matlink.org/assets/js/backbone.min.js"></script>
<script src="http://matlink.org/assets/js/bootstrap-222.min.js"></script>
<script src="http://matlink.org/assets/js/prettify.js"></script>
<script src="http://matlink.org/assets/js/lang-matlab.js"></script>
<script src="http://matlink.org/assets/js/lang-mma.js"></script>
<script>
jQuery(document).ready(function () {
		// apply syntax highlighting
		prettyPrint();

		// add language selection menus (after a small delay)
		setTimeout(function () {
			add_language_selection_menu();
			}, 300);
		});
</script>

<script>
$(function () {
		$('#install-tabs a:first').tab('show');
		})
</script>

</body>
</html>
