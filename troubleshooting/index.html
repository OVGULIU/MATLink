<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<title>MATLink — Troubleshooting</title>
<meta name="description" content="">
<meta name="author" content="R. Menon, Sz. Horvát">

<link rel="stylesheet" href="http://matlink.org/assets/css/bootstrap.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/site.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/prettify.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/lang-matlab.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/lang-mma.css">
<link rel="stylesheet" href="http://matlink.org/assets/css/font-awesome.min.css">

<script>

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-40302070-1']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

</script>
</head>
<body>

<!--navigation bar-->
<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<a class="brand" href="http://matlink.org/">MATLink</a>
			<ul class="nav">
				<li><a href="http://matlink.org/#installation">Installation</a></li>
				<li class="dropdown">
				<a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">
					Getting started
					<i class="icon-caret-down"></i>
				</a>
				<ul class="dropdown-menu" role="menu">
					<li class=""><a href="http://matlink.org/#connecting">Connecting to MATLink</a></li>
					<li class=""><a href="http://matlink.org/#executing-matlab">Executing MATLAB commands</a></li>
					<li class=""><a href="http://matlink.org/#transferring-data">Transferring data</a></li>
					<li class=""><a href="http://matlink.org/#scripts-functions">Working with scripts and functions</a></li>
				</ul>
				</li>
				<li><a href="http://matlink.org/documentation/">Documentation</a></li>
				<li><a href="http://matlink.org/troubleshooting/">Troubleshooting</a></li>
				<li><a href="http://matlink.org/examples/">Examples</a></li>
				<li><a href="http://matlink.org/extensions/">Extensions</a></li>
			</ul>
		</div>
	</div>
</div>


	<div class="container">
<h1 class="main-header">Troubleshooting</h1>

<p>Before beginning the troubleshooting, check that MATLink has been set up according to the <a href="http://matlink.org/#installation">installation instructions</a>, that you are using the latest MATLink version, and that your system meets the necessary requirements. Please also see the list of <a href="http://matlink.org/documentation/#known-issues">known issues</a>.  Once you've done that, read the following carefully, and see if your specific issue is covered.</p>
<p>If your issue is not resolved by the links below, please post a question on <a href="https://mathematica.stackexchange.com/">Mathematica Stack Exchange</a> and tag it with <a href="https://mathematica.stackexchange.com/questions/tagged/matlink"><code>matlink</code></a>. <!-- This is the preferred support option.  Alternatively, send an email to <a href="mailto:matlink.m@gmail.com">matlink.m@gmail.com</a>.  --><strong>Please include the output of the command <code>MATLink`Developer`GetInfo[]</code></strong>.</p>

<h2>Common issues</h2>
<div class="accordion" id="common">
	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse" data-parent="common" href="#force32bit">
				OptionValue::optnf: "Option name "Force32BitEngine" not found in defaults for MATLink."
			</a>
		</div>
		<div id="force32bit" class="accordion-body collapse in">
			<div class="accordion-inner">
				<p>This error occurs when upgrading to a newer version of MATLink and a new option has been added. To fix this issue, please run <code>MATLink`Developer`ResetSettings[]</code> and restart MATLink.</p>
			</div>
		</div>
	</div>
</div>
<h2>Operating system specific issues</h2>
<p>Each OS has a set of necessary steps (some of which might be set by default, depending on your configuration), which were previously described in the installation instructions, and a set of frequently encountered issues.</p>
<h3>Windows</h3>
<h4>Necessary steps</h4>
<ul>
	<li>MATLAB must have been registered as a COM server by running it as administrator and evaluating <code>regmatlabserver</code>.</li>
	<li>The <code>bin\win64</code> directory (or <code>bin\win32</code> for 32-bit versions) must be included in the operating system's <code>PATH</code> variable.  Mathematica (including its graphical interface) must be restarted after changing the system PATH. (<a href="https://www.google.com/webhp?q=windows+how+to+change+system+path#q=windows+how+to+change+system+path">How to change the system PATH on Windows?</a>)</li>
</ul>
<h4>FAQ</h4>
<div class="accordion" id="windows">
	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse" data-parent="windows" href="#libmxdll">
			"The program can't start because libmx.dll is missing from your computer"
			</a>
		</div>
		<div id="libmxdll" class="accordion-body collapse in">
			<div class="accordion-inner">
				<p>Make sure you have followed the installation instructions and added MATLAB's <code>bin\win64</code> (<code>bin\win32</code> directory if MATLAB is 32-bit) to the operating system's <code>PATH</code> environment variable. These directories are located within MATLAB's installation directory. A typical location would be</p>
<pre>
C:\Program Files\MATLAB\R2013a\bin\win64
</pre>
        <p>Pay special attention not to accidentally add any spaces on either side of the <code>;</code> separator characters when editing the <code>PATH</code> variable.</p>
        <p>After editing the system path, restart Mathematica (including the Front End).</p>
			</div>
		</div>
	</div>

	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse" data-parent="windows" href="#win-nostart">
				"The application was unable to start correctly."
			</a>
		</div>
		<div id="win-nostart" class="accordion-body collapse in">
			<div class="accordion-inner">
				<p>This error may indicate that you are using a 64-bit version of <i>Mathematica</i> with a 32-bit version of MATLAB. Note that student versions of MATLAB R2013b or earlier on Windows are only available in 32-bit.</p>

				<p>To be able to use a 32-bit MATLAB with a 64-bit <i>Mathematica</i>, evaluate the following:</p>

<pre class="prettyprint lang-mma">
Needs["MATLink`"]
SetOptions[MATLink, "Force32BitEngine" -> True]
</pre>

        <p>The error may also indicate that <code>"Force32BitEngine"</code> was accidentally set to <code>True</code>, even though your version of MATLAB is 64-bit. If this is the case, set it back to <code>False</code>.

			</div>
		</div>
	</div>

<div class="accordion-group">
  <div class="accordion-heading">
    <a class="accordion-toggle" data-toggle="collapse" data-parent="windows" href="#win-update">
      MATLink won't work after MATLAB was updated to a newer version.
    </a>
  </div>
  <div id="win-update" class="accordion-body collapse in">
    <div class="accordion-inner">
      <p>When MATLAB is updated to a newer version, some of the MATLink <a href="http://matlink.org/#installation">installation steps</a> need to be performed again:
        <ul>
          <li>Remove the old MATLAB version's <code>bin\win64</code> directory from the system's <code>PATH</code> environment variable, and add the new one.  It is important that only a single MATLAB version is present in the system <code>PATH</code>.</li>
          <li>Register the new MATLAB version as COM server by running it as administrator and evaluating <code>regmatlabserver</code> from the MATLAB command prompt.  It is important that the same MATLAB version that is added to the <code>PATH</code> should be registered as COM server as well.</li>
        </ul>
      </p>
      <p>If you used a student version of MATLAB earlier than R2014a on Windows, it was a 32-bit version.  R2014a is available for Windows in 64-bit as a student version.  If updating a 32-bit version to a 64-bit version, it is necessary to change this setting in MATLink as well: <code>SetOptions[MATLink, "Force32BitEngine" -> False]</code>.</p>

    </div>
  </div>
</div>

<div class="accordion-group">
  <div class="accordion-heading">
    <a class="accordion-toggle" data-toggle="collapse" data-parent="windows" href="#win-dll">
      The procedure entry point ... could not be located in the dynamic link library tbb.dll
    </a>
  </div>
  <div id="win-dll" class="accordion-body collapse in">
    <div class="accordion-inner">
      <p>LabView is known to install <code>tbb.dll</code> in the <code>C:\Windows\System32</code> directory.  When starting MATLAB though MATLink, MATLAB tries to load this incompatible version of <code>tbb.dll</code>, which causes the following error:</p><br/>
        <blockquote>The procedure entry point ?throw_exception_v4@internal@tbb@@YAXW4exception_id@12@@Z could not be located in the dynamic link library tbb.dll</blockquote>
      <p>Removing <code>tbb.dll</code> from <code>C:\Windows\System32</code> solves this problem, but the effects on LabView are not clear.  Do keep a backup of <code>tbb.dll</code>.</p>
    </div>
  </div>
</div>

<div class="accordion-group">
  <div class="accordion-heading">
    <a class="accordion-toggle" data-toggle="collapse" data-parent="windows" href="#win-hang">
      Executing <code>OpenMATLAB[]</code> hangs
    </a>
  </div>
  <div id="win-hang" class="accordion-body collapse in">
    <div class="accordion-inner">
      <p>When <code>OpenMATLAB[]</code> hangs on Windows, it is typically accompanied by an error message shown in a popup windows. This popup window may be hidden behind other open windows, for example behind a Mathematica notebook.  Please check carefully for such error dialogs.  If you found an error message, please review again the list of troubleshooting topics on this page to see if there is already a solution.</p>
    </div>
  </div>
</div>

</div>

<h3>Linux</h3>
<h4>Necessary steps</h4>
<ul>
<li>Ensure that both <code>matlab</code> and <code>math</code> are in the <code>PATH</code>.  Also ensure that <code>matlab</code> can be launched <em>from within Mathematica</em> by evaluating <code>Import["!matlab -nodesktop -nojvm -r quit", "Text"]</code> in Mathematica.  Unfortunately Mathematica may sometimes change <code>PATH</code>.</li>
<li>Ensure that you have a recent version of <code>g++</code> installed.  If <code>g++</code> is not installed, on Ubuntu, use <code>apt-get install g++</code>.   <b>Note: </b> On Ubuntu <code>gcc</code> is installed by default, but <code>g++</code> is not.</li>
<li>Ensure that development libraries for <code>libuuid</code> are installed.  On Ubuntu, use <code>apt-get install uuid-dev</code>.</li>
<li>Ensure that <code>/bin/csh</code> is installed and it works.  On Ubuntu, use <code>apt-get install csh</code>.</li>
<li>Make sure that you are using a version of gcc which is compatible with your MATLAB version.  The compiler requirements are documented <a href="https://www.mathworks.com/support/compilers/">on this MathWorks support page</a>.  Edit the URL to get the corresponding page for your version of MATLAB.</li>
</ul>
<h4>FAQ</h4>
<div class="accordion" id="linux">
	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse" data-parent="linux" href="#auto-compile-failed">
			"Automatically compiling the MATLink Engine has failed"
			</a>
		</div>
		<div id="auto-compile-failed" class="accordion-body collapse in">
			<div class="accordion-inner">
				<p>Linux binaries of <code>mengine</code> are not included in the download package, and MATLink relies on automatic compilation instead. The error indicates that this has failed.</p>

				<p>First, make sure that you have a recent version of <code>g++</code> installed, <a href="https://www.mathworks.com/support/compilers/">which is compatible with your version of MATLAB</a>. To see what is going wrong during compilation, try compiling <code>mengine</code> manually:</p>

				<ul>
					<li>Open a terminal and navigate to the directory <code>MATLink/Engine/src</code>.</li>
					<li>Run <code>make -f Makefile.lin64</code> (or <code>make -f Makefile.lin32</code>).</li>
				</ul>

				<p>If the errors shown don't give an indication of what is going wrong, send an email to <a href="mailto:matlink.m@gmail.com">matlink.m@gmail.com</a>.</p>


			</div>
		</div>
	</div>

	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse" data-parent="linux" href="#lin-openmatlab-failed">
				Executing <code>OpenMATLAB[]</code> simply hangs
			</a>
		</div>
		<div id="lin-openmatlab-failed" class="accordion-body collapse in">
			<div class="accordion-inner">
        <p>There are two distinct problems that can cause this symptom:</p>
        <p><strong>1. csh is not installed:</strong></p>
        <p>Make sure <code>csh</code> is installed, as it is required by MATLAB's Engine interface.  On Ubuntu, it can be installed using <code>sudo apt-get install csh</code>.</p>
        <p><strong>2. mengine failed to launch:</strong></p>
				<p><code>OpenMATLAB[]</code> will hang if the <code>mengine.sh</code> script fails to launch the binary executable <code>mengine</code>. The most common cause for this is that it cannot find the shared libraries it needs from either <i>Mathematica</i> or MATLAB. Try launching <code>mengine.sh</code> manually from the terminal and see if it complains about missing libraries. If it is working correctly, you should see a prompt <code>Create link:</code>.  At this prompt press enter twice to exit.</p>

				<p>If MATLAB has been upgraded to a newer version, it may be necessary to recompile <code>mengine</code>. Do this by evaluating the following in a fresh <i>Mathematica</i> kernel:</p>

<pre class="prettyprint lang-mma">
Needs["MATLink`"]
MATLink`Developer`CompileMEngine[]
</pre>
			</div>
		</div>
	</div>

</div>

<h3>OS X</h3>
<h4>Necessary steps</h4>
<ul>
<li>If MATLAB is not installed in a standard location, make sure that the correct location of the MATLAB app bundle is set in the <code>MATLink/Engine/bin/MacOSX64/mengine.sh</code> file.</li>
<li>Make sure that <code>/bin/csh</code> is available and it works.</li>
</ul>
<h4>FAQ</h4>
<div class="accordion" id="osx">
	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse" data-parent="osx" href="#osx-openmatlab-failed">
				Executing <code>OpenMATLAB[]</code> simply hangs
			</a>
		</div>
		<div id="osx-openmatlab-failed" class="accordion-body collapse in">
			<div class="accordion-inner">
				<p>This typically indicates that the <code>mengine.sh</code> script failed to launch the binary executable <code>mengine</code>. The most common cause for this is that it cannot find the shared libraries it needs from either <i>Mathematica</i> or MATLAB. Try launching <code>mengine.sh</code> manually from the terminal and see if it complains about missing libraries. If it is working correctly, you should see a prompt <code>Create link:</code>.  At this prompt press enter twice to exit.</p>
			</div>
		</div>
	</div>

	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse" data-parent="osx" href="#auto-compile-32bit">
				"Automatically compiling the MATLink Engine from source for 32-bit OS X is not supported"
			</a>
		</div>
		<div id="auto-compile-32bit" class="accordion-body collapse in">
			<div class="accordion-inner">
				<p>We do not have access to 32-bit OS X systems, so we can't provide binaries for them. If you are using such an old system, you will need to compile <code>mengine</code> yourself, and place the resulting binary in <code>MATLink/Engine/bin/MacOSX32/</code>.  You will also need to provide an <code>mengine.sh</code> script that sets <code>PATH</code> and <code>DYLD_LIBRARY_PATH</code> before launching <code>mengine</code>.  Please see the model in <code>MATLink/Engine/bin/MacOSX64/</code>.</p>

<p>If you need assistance, send an e-mail to <a href="mailto:matlink.m@gmail.com">matlink.m@gmail.com</a>.</p>
			</div>
		</div>
	</div>
</div>



<footer class="footer">
	<div class="container">
		<ul class="footer-links">
			<li>Created and maintained by <a href="https://github.com/rsmenon/">rsmenon</a> and <a href="https://github.com/szhorvat">szhorvat</a> © 2013-2017</li>
			<li class="muted">·</li>
			<li>Licensed under the <a href="http://opensource.org/licenses/mit-license.html">MIT License</a></li>
			<li class="muted">·</li>
			<li><a href="http://matlink.org/changelog.html">Change log</a></li>
		</ul>
		<p><i>Mathematica</i> is a registered trademark of <a href="http://wolfram.com">Wolfram Research, Inc.</a> and MATLAB is a registered trademark of <a href="http://mathworks.com/">The MathWorks, Inc.</a></p>
	</div>
</footer>
	</div>

	<script src="http://matlink.org/assets/js/jquery-1.9.1.min.js"></script>
	<script src="http://matlink.org/assets/js/underscore.min.js"></script>
	<script src="http://matlink.org/assets/js/backbone.min.js"></script>
	<script src="http://matlink.org/assets/js/bootstrap-222.min.js"></script>
	<script src="http://matlink.org/assets/js/prettify.js"></script>
	<script src="http://matlink.org/assets/js/lang-matlab.js"></script>
	<script src="http://matlink.org/assets/js/lang-mma.js"></script>
	<script type="text/javascript">
jQuery(document).ready(function () {
		// apply syntax highlighting
		prettyPrint();

		// add language selection menus (after a small delay)
		setTimeout(function () {
			add_language_selection_menu();
			}, 300);
		});
	</script>

	<script>
$(function () {
		$('#install-tabs a:first').tab('show');
		})
	</script>
	<script>
$(function () {
	$(".collapse").collapse();
		})
	</script>
	</body>
	</html>
